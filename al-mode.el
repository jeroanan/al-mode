(setq al-font-lock-keywords
      (let* (
	     (x-control-keywords '("ARRAY"
				   "ASSERTERROR"
				   "BEGIN"
				   "BREAK"
				   "CASE"
				   "DO"
				   "DOWNTO"
				   "ELSE"
				   "END"
				   "EVENT"
				   "EXIT"
				   "FOR"
				   "FOREACH"
				   "FUNCTION"
				   "IF"
				   "IMPLEMENTS"
				   "IN"
				   "INDATASET"
				   "INTERFACE"
				   "INTERNAL"
				   "LOCAL"
				   "OF"
				   "PROCEDURE"
				   "PROGRAM"
				   "PROTECTED"
				   "REPEAT"
				   "RUNONCLIENT"
				   "SECURITYFILTERING"
				   "SUPPRESSDISPOSE"
				   "TEMPORARY"
				   "THEN"
				   "TO"
				   "TRIGGER"
				   "UNTIL"
				   "VAR"
				   "WHILE"
				   "WITH"
				   "WITHEVENTS"))
	     
	     (x-operator-keywords '("AND"
				    "DIV"
				    "MOD"
				    "NOT"
				    "OR"
				    "XOR"))
	     (x-property-keywords '("AVERAGE"
				    "CONST"
				    "COUNT"
				    "EXIST"
				    "FIELD"
				    "FILTER"
				    "LOOKUP"
				    "MAX"
				    "MIN"
				    "ORDER"
				    "SORTING"
				    "SUM"
				    "TABLEDATA"
				    "UPPERLIMIT"
				    "WHERE"
				    "ASCENDING"
				    "DESCENDING"))
	     (x-applicationobject-keywords '("CODEUNIT"
					     "PAGE"
					     "PAGEEXTENSION"
					     "PAGECUSTOMIZATION"
					     "DOTNET"
					     "ENUM"
					     "ENUMEXTENSION"
					     "VALUE"
					     "QUERY"
					     "REPORT"
					     "TABLE"
					     "TABLEEXTENSION"
					     "XMLPORT"
					     "PROFILE"
					     "CONTROLADDIN"))
	     (x-builtintype-keywords '("Action"
				       "Array"
				       "Automation"
				       "BigInteger"
				       "BigText"
				       "Blob"
				       "Boolean"
				       "Byte"
				       "Char"
				       "ClientType"
				       "Code"
				       "Codeunit"
				       "CompletionTriggerErrorLevel"
				       "ConnectionType"
				       "Database"
				       "DataClassification"
				       "DataScope"
				       "Date"
				       "DateFormula"
				       "DateTime"
				       "Decimal"
				       "DefaultLayout"
				       "Dialog"
				       "Dictionary"
				       "DotNet"
				       "DotNetAssembly"
				       "DotNetTypeDeclaration"
				       "Duration"
				       "Enum"
				       "ErrorInfo"
				       "ErrorType"
				       "ExecutionContext"
				       "ExecutionMode"
				       "FieldClass"
				       "FieldRef"
				       "FieldType"
				       "File"
				       "FilterPageBuilder"
				       "Guid"
				       "InStream"
				       "Integer"
				       "Joker"
				       "KeyRef"
				       "List"
				       "ModuleDependencyInfo"
				       "ModuleInfo"
				       "None"
				       "Notification"
				       "NotificationScope"
				       "ObjectType"
				       "Option"
				       "OutStream"
				       "Page"
				       "PageResult"
				       "Query"
				       "Record"
				       "RecordId"
				       "RecordRef"
				       "Report"
				       "ReportFormat"
				       "SecurityFilter"
				       "SecurityFiltering"
				       "Table"
				       "TableConnectionType"
				       "TableFilter"
				       "TestAction"
				       "TestField"
				       "TestFilterField"
				       "TestPage"
				       "TestPermissions"
				       "TestRequestPage"
				       "Text"
				       "TextBuilder"
				       "TextConst"
				       "TextEncoding"
				       "Time"
				       "TransactionModel"
				       "TransactionType"
				       "Variant"
				       "Verbosity"
				       "Version"
				       "XmlPort"
				       "HttpContent"
				       "HttpHeaders"
				       "HttpClient"
				       "HttpRequestMessage"
				       "HttpResponseMessage"
				       "JsonToken"
				       "JsonValue"
				       "JsonArray"
				       "JsonObject"
				       "View"
				       "Views"
				       "XmlAttribute"
				       "XmlAttributeCollection"
				       "XmlComment"
				       "XmlCData"
				       "XmlDeclaration"
				       "XmlDocument"
				       "XmlDocumentType"
				       "XmlElement"
				       "XmlNamespaceManager"
				       "XmlNameTable"
				       "XmlNode"
				       "XmlNodeList"
				       "XmlProcessingInstruction"
				       "XmlReadOptions"
				       "XmlText"
				       "XmlWriteOptions"
				       "WebServiceActionContext"
				       "WebServiceActionResultCode"
				       "SessionSettings"))
	     (x-comparison-keywords '("<="
				      ">="
				      "<>"
				      "<"
				      ">"))
	     (x-math-keywords '("-"
				"+"
				"/"
				"*"))
	     (x-assignment-keywords '(":="
				      "+="
				      "-="
				      "/="
				      "*="))
	     (x-other-keywords '("ADDFIRST"
				 "ADDLAST"
				 "ADDAFTER"
				 "ADDBEFORE"
				 "ACTION"
				 "ACTIONS"
				 "AREA"
				 "ASSEMBLY"
				 "CHARTPART"
				 "CUEGROUP"
				 "CUSTOMIZES"
				 "COLUMN"
				 "DATAITEM"
				 "DATASET"
				 "ELEMENTS"
				 "EXTENDS"
				 "FIELD"
				 "FIELDGROUP"
				 "FIELDATTRIBUTE"
				 "FIELDELEMENT"
				 "FIELDGROUPS"
				 "FIELDS"
				 "FILTER"
				 "FIXED"
				 "GRID"
				 "GROUP"
				 "MOVEAFTER"
				 "MOVEBEFORE"
				 "KEY"
				 "KEYS"
				 "LABEL"
				 "LABELS"
				 "LAYOUT"
				 "MODIFY"
				 "MOVEFIRST"
				 "MOVELAST"
				 "MOVEBEFORE"
				 "MOVEAFTER"
				 "PART"
				 "REPEATER"
				 "USERCONTROL"
				 "REQUESTPAGE"
				 "SCHEMA"
				 "SEPARATOR"
				 "SYSTEMPART"
				 "TABLEELEMENT"
				 "TEXTATTRIBUTE"
				 "TEXTELEMENT"
				 "TYPE"
				 ))
	     (x-all-keywords (append x-control-keywords
				     x-operator-keywords
				     x-property-keywords
				     x-applicationobject-keywords
				     x-builtintype-keywords
				     x-comparison-keywords
				     x-math-keywords
				     x-assignment-keywords
				     x-other-keywords))
	     (x-control-keywords-regexp (regexp-opt x-all-keywords 'words))
	     )
	`(
	  (,x-control-keywords-regexp . font-lock-keyword-face))))


(define-derived-mode al-mode prog-mode "al mode"
  "Major mode for editing AL Language Files"
    (set (make-local-variable 'font-lock-defaults)
       '(al-font-lock-keywords nil t)))

(provide 'al-mode)
